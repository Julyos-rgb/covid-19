{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-7b3d0aba\"],{ade3:function(t,e,i){\"use strict\";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,\"a\",(function(){return n}))},dc09:function(t,e,i){\"use strict\";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",[i(\"el-row\",{staticClass:\"box\"},[t._e(),i(\"el-col\",{attrs:{span:24}},[i(\"el-card\",{staticClass:\"group\"},[i(\"div\",{staticClass:\"group_head\"},[i(\"el-page-header\",{staticClass:\"title\",attrs:{content:\"校园群聊\"},on:{back:t.goBack}}),i(\"div\",{staticClass:\"group_head_online\"},[i(\"el-button\",{staticStyle:{\"margin-left\":\"16px\",background:\"none\",border:\"none\",color:\"dodgerblue\"},attrs:{type:\"primary\"},on:{click:function(e){t.drawer=!0}}},[i(\"span\",{domProps:{textContent:t._s(\"在线\"+t.online+\"人\")}})])],1)],1),i(\"div\",{staticClass:\"comment\",attrs:{id:\"divDetail\"}},[i(\"ul\",t._l(t.commlist,(function(e){return i(\"li\",{key:e.id,staticStyle:{\"list-style-type\":\"none\"}},[e.if?t._e():i(\"div\",{staticClass:\"msgOther\"},[i(\"div\",{staticClass:\"head_img\"},[i(\"img\",{attrs:{src:t.imgpath+e.msgData.img,alt:\"\"}})]),i(\"div\",{staticClass:\"msg\"},[i(\"div\",{staticClass:\"msg_title\"},[i(\"span\",{domProps:{textContent:t._s(e.msgData.name)}}),i(\"i\",{domProps:{textContent:t._s(t.timeDetia(e.date))}},[t._v(\"2020-8-28\")])]),i(\"div\",[i(\"pre\",[t._v(t._s(e.msgData.msg))])])])]),e.if?i(\"div\",{staticClass:\"msgMy\"},[i(\"div\",{staticClass:\"msg\"},[i(\"div\",{staticClass:\"msg_title\"},[i(\"i\",{domProps:{textContent:t._s(t.timeDetia(e.date))}},[t._v(\"2020-8-28\")]),i(\"span\",{domProps:{textContent:t._s(e.msgData.name)}})]),i(\"div\",[i(\"pre\",[t._v(t._s(e.msgData.msg))])])]),i(\"div\",{staticClass:\"head_img\"},[i(\"img\",{attrs:{src:t.imgpath+e.msgData.img,alt:\"\"}})])]):t._e()])})),0)]),i(\"div\",{staticClass:\"send\"},[i(\"div\",{staticStyle:{\"margin-top\":\"15px\"}},[i(\"el-input\",{attrs:{type:\"textarea\",rows:7,placeholder:\"请输入内容\",size:\"medium\"},nativeOn:{keyup:function(e){return!e.type.indexOf(\"key\")&&t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?null:t.send(e)}},model:{value:t.comm,callback:function(e){t.comm=e},expression:\"comm\"}})],1)])])],1)],2)],1)},s=[],o=(i(\"a15b\"),i(\"b0c0\"),i(\"a4d3\"),i(\"4de4\"),i(\"4160\"),i(\"e439\"),i(\"dbb4\"),i(\"b64b\"),i(\"159b\"),i(\"ade3\"));function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){Object(o[\"a\"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var c={name:\"index\",data:function(){return{drawer:!1,online:5,comm:\"\",u_id:0,imgpath:this.socketpath+\"/file/\",commlist:[{msgData:{msg:\"系统提示:请不要轻易相信陌生人的交易信息\",name:\"系统提示\",uid:2,img:\"999.png\"},date:20202020}]}},sockets:{connect:function(t){console.log(\"[SYSTERM]握手成功\")},getmsg:function(t){var e;t.msgData.uid==(null===(e=JSON.parse(window.localStorage.getItem(\"socketData\")))||void 0===e?void 0:e.id)?t.if=!0:t.if=!1,this.commlist.push(t),this.goDivbo(\"divDetail\")},welcome:function(t){this.online=t.length,this.open(\"欢迎\"+t[t.length-1].name+\"加入群聊\",1e3,\"success\")},disconnects:function(t,e){this.online=t.length},quit:function(t){this.open(t+\"离开了群聊\",1e3,\"info\")}},created:function(){this.join()},methods:{goBack:function(){this.$router.go(-1),this.quit()},quit:function(){this.socket.emit(\"quit\",this.getItem())},getItem:function(){var t=window.localStorage.getItem(\"socketData\");t=JSON.parse(t);var e=r({},t);return e.uid=null===e||void 0===e?void 0:e.id,e},goDivbo:function(t){var e=document.getElementById(t);e.scrollTop=e.scrollHeight},send:function(t){if(window.localStorage.getItem(\"socketData\")){if(13!=t.keyCode||!t.shiftKey){if(1==this.comm.length)return this.open(\"输入框不能为空\",500,\"info\"),void(this.comm=\"\");if(this.goDivbo(\"divDetail\"),this.comm.length>0){var e=this.getItem();e.msg=this.comm,this.socket.emit(\"message\",e),this.comm=\"\"}}}else alert(\"您未登录,处于游客模式 不能发信息\")},join:function(){if(window.localStorage.getItem(\"socketData\")){var t=window.localStorage.getItem(\"socketData\");t=JSON.parse(t);var e=r({},t);e.uid=null===e||void 0===e?void 0:e.id,this.socket.emit(\"join\",e)}else alert(\"您未登录,处于游客模式 不能发信息\")},timeDetia:function(t){var e,i=new Date(t),n=new Date,s=(i.getTime(),i.getHours()),o=i.getMinutes(),a=i.getFullYear(),r=i.getMonth()+1,c=i.getDate(),l=(n.getTime(),n.getHours(),n.getMinutes(),n.getFullYear()),m=n.getMonth()+1,d=n.getDate();return c==d&&r==m&&a==l?(s<10&&(s=\"0\"+s),o<10&&(o=\"0\"+o),e=s+\":\"+o,e):c+1==d&&r==m&&a==l?(s<10&&(s=\"0\"+s),o<10&&(o=\"0\"+o),e=\"昨天 \"+s+\":\"+o,e):(r<10&&(r=\"0\"+r),c<10&&(c=\"0\"+c),s<10&&(s=\"0\"+s),o<10&&(o=\"0\"+o),e=a+\"年\"+r+\"月\"+c+\"日 \"+s+\":\"+o,e)},open:function(t,e,i){this.$message({message:t,duration:e,type:i})}}},l=c,m=(i(\"e2606\"),i(\"2877\")),d=Object(m[\"a\"])(l,n,s,!1,null,\"f66e68ce\",null);e[\"default\"]=d.exports},e2606:function(t,e,i){\"use strict\";var n=i(\"ebbd\"),s=i.n(n);s.a},ebbd:function(t,e,i){}}]);","extractedComments":[]}